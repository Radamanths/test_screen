import { CrystalSparkleIcon } from '../icons/FigmaIcons';
import { VideoIcon } from '../icons/FigmaIcons';
import type { NavTab } from '../../types';

interface BottomNavProps {
  tabs: NavTab[];
  onTabChange?: (tabId: string) => void;
}

/** bi:stars icon for "Тренды" tab — exact 3-sparkle path from Figma SVG */
function StarsIcon({ size = 24 }: { size?: number }) {
  return (
    <svg
      width={size}
      height={size}
      viewBox="73.5 782 24 24"
      fill="white"
      style={{ flexShrink: 0 }}
    >
      <path d="M84.9855 791.371C85.1505 790.876 85.8495 790.876 86.0145 791.371L86.982 794.276C87.195 794.915 87.5538 795.495 88.03 795.971C88.5062 796.447 89.0867 796.805 89.7255 797.018L92.6295 797.986C93.1245 798.151 93.1245 798.85 92.6295 799.015L89.724 799.982C89.0853 800.195 88.505 800.554 88.029 801.03C87.5531 801.506 87.1946 802.087 86.982 802.726L86.0145 805.63C85.9789 805.738 85.91 805.832 85.8176 805.899C85.7252 805.966 85.6141 806.002 85.5 806.002C85.3859 806.002 85.2748 805.966 85.1824 805.899C85.09 805.832 85.0211 805.738 84.9855 805.63L84.018 802.724C83.8052 802.085 83.4466 801.505 82.9707 801.029C82.4948 800.553 81.9145 800.195 81.276 799.982L78.3705 799.015C78.2621 798.979 78.1677 798.91 78.1008 798.818C78.0339 798.725 77.9979 798.614 77.9979 798.5C77.9979 798.386 78.0339 798.275 78.1008 798.182C78.1677 798.09 78.2621 798.021 78.3705 797.986L81.276 797.018C81.9145 796.805 82.4948 796.447 82.9707 795.971C83.4466 795.495 83.8052 794.915 84.018 794.276L84.9855 791.371ZM79.191 783.722C79.2125 783.657 79.2539 783.601 79.3094 783.56C79.3649 783.52 79.4316 783.499 79.5 783.499C79.5684 783.499 79.6351 783.52 79.6906 783.56C79.7461 783.601 79.7875 783.657 79.809 783.722L80.3895 785.465C80.649 786.242 81.258 786.851 82.035 787.111L83.778 787.691C83.843 787.713 83.8995 787.754 83.9395 787.809C83.9796 787.865 84.0012 787.932 84.0012 788C84.0012 788.068 83.9796 788.135 83.9395 788.191C83.8995 788.246 83.843 788.288 83.778 788.309L82.035 788.89C81.6516 789.017 81.3031 789.232 81.0175 789.517C80.7318 789.803 80.5168 790.152 80.3895 790.535L79.809 792.278C79.7875 792.343 79.7461 792.399 79.6906 792.44C79.6351 792.48 79.5684 792.501 79.5 792.501C79.4316 792.501 79.3649 792.48 79.3094 792.44C79.2539 792.399 79.2125 792.343 79.191 792.278L78.6105 790.535C78.4832 790.152 78.2682 789.803 77.9825 789.517C77.6969 789.232 77.3484 789.017 76.965 788.89L75.222 788.309C75.157 788.288 75.1005 788.246 75.0604 788.191C75.0204 788.135 74.9988 788.068 74.9988 788C74.9988 787.932 75.0204 787.865 75.0604 787.809C75.1005 787.754 75.157 787.713 75.222 787.691L76.965 787.111C77.3484 786.983 77.6969 786.768 77.9825 786.483C78.2682 786.197 78.4832 785.848 78.6105 785.465L79.191 783.722ZM89.7945 782.149C89.8093 782.106 89.8371 782.069 89.8739 782.043C89.9107 782.016 89.9548 782.002 90 782.002C90.0452 782.002 90.0893 782.016 90.1261 782.043C90.1629 782.069 90.1907 782.106 90.2055 782.149L90.5925 783.31C90.765 783.829 91.1715 784.235 91.6905 784.408L92.8515 784.795C92.8942 784.809 92.9312 784.837 92.9575 784.874C92.9837 784.911 92.9978 784.955 92.9978 785C92.9978 785.045 92.9837 785.089 92.9575 785.126C92.9312 785.163 92.8942 785.191 92.8515 785.206L91.6905 785.593C91.435 785.678 91.2028 785.822 91.0122 786.012C90.8217 786.203 90.678 786.435 90.5925 786.691L90.2055 787.852C90.1907 787.894 90.1629 787.931 90.1261 787.957C90.0893 787.984 90.0452 787.998 90 787.998C89.9548 787.998 89.9107 787.984 89.8739 787.957C89.8371 787.931 89.8093 787.894 89.7945 787.852L89.4075 786.691C89.322 786.435 89.1783 786.203 88.9878 786.012C88.7972 785.822 88.565 785.678 88.3095 785.593L87.15 785.206C87.1073 785.191 87.0703 785.163 87.044 785.126C87.0178 785.089 87.0037 785.045 87.0037 785C87.0037 784.955 87.0178 784.911 87.044 784.874C87.0703 784.837 87.1073 784.809 87.15 784.795L88.311 784.408C88.83 784.235 89.2365 783.829 89.409 783.31L89.7945 782.149Z" />
    </svg>
  );
}

function TabIcon({ icon, size = 24 }: { icon: string; size?: number }) {
  switch (icon) {
    case 'sparkles':
      return <StarsIcon size={size} />;
    case 'crystal':
      return <CrystalSparkleIcon size={size} />;
    case 'play':
      return <VideoIcon size={size} />;
    default:
      return <CrystalSparkleIcon size={size} />;
  }
}

export function BottomNav({ tabs, onTabChange }: BottomNavProps) {
  return (
    <nav
      className="z-50"
      style={{
        background: '#000000',
        width: '390px',
        height: '80px',
        padding: '18px 67px',
      }}
    >
      <div className="flex items-center justify-center gap-[72px] h-full">
        {tabs.map((tab) => (
          <button
            key={tab.id}
            onClick={() => onTabChange?.(tab.id)}
            className="flex flex-col items-center gap-[8px] bg-transparent border-none cursor-pointer p-0"
            style={{ opacity: tab.active ? 1 : 0.5, width: '37px' }}
          >
            <TabIcon icon={tab.icon} size={24} />
            <span
              className="text-white text-[10px] leading-[12px] whitespace-nowrap"
              style={{ fontWeight: tab.active ? 600 : 500 }}
            >
              {tab.label}
            </span>
          </button>
        ))}
      </div>
    </nav>
  );
}
